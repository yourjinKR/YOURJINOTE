# 개요
```java
public <T> void inputRepeat(Consumer<T> consumer, T params) {
    while (true) {
        try {
            consumer.accept(params);
            return;
        } catch (IllegalArgumentException e) {
            System.out.println(e.getMessage());
        }
    }
}

inputRepeat((rule) -> {  
    ResultRequest request = inputView.inputWinningNumber();  
    ResultResponse response = lottoService.getResult(request, rule);  
    outputView.printLottoResult(response);  
}, playRule);
```
이전에 java로 과제를 수행하는 과정에서 예외가 발생하지 않을 때까지 특정 로직을 반복 수행하는 요구사항이 있었기에 위와 같이 함수형 인터페이스를 사용하여 위와 같이 구현했습니다.

> **함수형 인터페이스**
> Object Class의 메서드를 제외하고 '구현해야 할 추상 메서드가 하나만 정의된 인터페이스' 를 의미

```kotlin
fun repeatUntilSuccess(action: () -> Unit) {  
    while (true) {  
        try {  
            action()  
            return  
        } catch (e: IllegalArgumentException) {  
            println(e.message)  
        }  
    }  
}

repeatUntilSuccess {  
    val purchaseRequest = inputView.purchaseAmount()  
    val purchaseResponse = lottoService.purchaseLotto(purchaseRequest, lottoGame)  
    outputView.purchaseResult(purchaseResponse)  
}
```
일단 결론적으로 코틀린에서는 위와 같이 구현합니다. 미묘한 차이지만 자바에서 사용하던 `Consumer`와 같은 추상적인 개념 없이 함수 자체를 매개변수로 사용할 수 있고 해당 함수는 함수 내부에서 실행 할 수 있습니다.

이러한 멋진 일을 할 수 있는건 코틀린이 **객체지향** 뿐만 아니라 **함수형 프로그래밍** 또한 지원하는 **다중 패러다임 언어**이기 때문입니다

# 코틀린과 함수형 프로그래밍

## 함수형 프로그래밍
함수의 유기적 연결 및 동작이 프로그램의 최우선이 되는 프로그래밍 방식을 말합니다.

> 함수형 프로그래밍은 성공적인 프로그래밍, 안전한 프로그램을 위해  부수 효과를 최대한 멀리하고  
> 조합성을 강조하는 프로그래밍 패러다임이다.

함수형 프로그래밍에서 함수는 **일급 객체**로써의 의미를 갖습니다.
## 주요 키워드
### 일급 객체
**일급 객체**는 프로그래밍 언어의 **기본 요소**로서, 다른 엔티티와 동등하게 다루어지는 객체를 의미하며, 변수에 담거나, 함수의 인자로 전달하거나, 함수에서 반환될 수 있는 성질을 가집니다.
### 일급 함수
- 함수를 변수로 담을 수 있다.
- 함수나 메소드의 인자로 함수를 넘길 수 있다.
- 함수나 메서드에서 함수를 리턴할 수 있다.
```kotlin
// 변수에 담기
val sum = { a: Int, b: Int -> a + b }

// 인자로 함수 넘기기
println(sum(1,2))

// 함수를 리턴
fun makePlusWithStart(start: Int): (Int, Int) -> Int {  
    return { a, b -> start + a + b }  
}
val sumWithTwo = makePlusWithStart(2)  
val sumResult = sumWithTwo(1,2)  
println(sumResult)
// result : 5
```

### 고차함수
**고차 함수**는 **함수를 매개변수**로 받거나 **함수를 결과로 반환**할 수 있는 함수를 말합니다.
[[[Kotlin] 고차 함수 (High-order Function)]]
```kotlin
// 26세 이하만 필터링
val person = persons.filter { it -> it.age <= 26 }
// 이름을 기준으로 list를 만듦
val names = people.map { it.name }
// 도시를 기준으로 그룹화
val byCity = people.groupBy { it.city }
```

### 참조 투명성
외부의 값에 영향받지 않으며 동일한 입력에 항상 동일한 결과를 반환하는 성질

### 불변성
변수의 값을 한 번 설정한 후에는 변경할 수 없다는 개념입니다. 자바에서는 `final` 키워드, 코틀린에서는 `val` 키워드로 불변성을 구현 가능
> 데이터 수정 대신 새로운 데이터 반환

```kotlin
val mutable = mutableListOf(1, 2, 3)
```
`MutableList`와 같은 불변 컬렉션을 개별적으로 지원함

### 순수 함수
함수의 결과가 오직 입력에만 의존하고, 함수 호출이 부작용(side effect)을 일으키지 않는 함수를 의미
```kotlin
fun sum(a : Int, b: Int) : Int {
	return a + b
}
```

> **사이드 이펙트**
> 함수가 만들어진 목적과는 다른 효과. 즉, 예상치 못한 일이 발생할 가능성이 있는 것
> - 함수 외부의 변수의 값을 변경하는 행위
> - 입력된 파라미터를 변경하는 행위
> - 네트워크 요청을 보내는 행위
> - 데이터 입출력을 하는 행위

## 함수형 프로그래밍의 이점
불변성과 참조 투명성을 준수하다 보면 많은 코드들이 순수한 함수가 될 수 있습니다.
이러한 코드의 비중이 높아진다면 이와 같은 효과를 기대할 수 있습니다.
- 데이터의 명확성
- 테스트의 용이성
- 코드의 안정성

불변한 코드는 여러 스레드가 동시에 접근해도 값이 변화하지 않으므로 안전하게 사용할 수 있는 장점이 있습니다.
> 해당 개념에 대해서는 제가 이해가 아직 부족하여 부가 설명이 없습니다..
> 이에 대해 아시는 분 계시다면 피드백 달게 받겠습니다!!

# 도움이 됐던 자료
[[Kotlin] Kotlin 기본 문법 이해하기 -4 : 함수, 파라미터, 스코프 함수](https://adjh54.tistory.com/610#1)
[함수형 프로그래밍이란??? (feat. kotlin)](https://hik-coding.tistory.com/330)
[[코틀린] 코틀린과 함수형 프로그래밍?](https://velog.io/@ejjjang0414/%EC%BD%94%ED%8B%80%EB%A6%B0-%EC%BD%94%ED%8B%80%EB%A6%B0%EA%B3%BC-%ED%95%A8%EC%88%98%ED%98%95-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)
[[카카오페이] 코틀린 함수형 프로그래밍의 길을 찾아서](https://tech.kakaopay.com/post/way-to-functional-programming/#4-%EC%9D%B4%EB%AF%B8-%EC%9E%98-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A0%B8-%EC%9E%88%EB%8A%94-%EB%9D%BC%EC%9D%B4%EB%B8%8C%EB%9F%AC%EB%A6%ACkotlin-arrow-%ED%99%9C%EC%9A%A9)
[[유튜브] 함수형 프로그래밍이 뭔가요?](https://www.youtube.com/watch?v=jVG5jvOzu9Y)
