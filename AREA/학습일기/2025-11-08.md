# 코틀린이 처음임
[현재 내가 사용한 언어 비율](https://github-readme-stats.vercel.app/api/top-langs/?username=yourjinKR&layout=compact&theme=dark)
![[Pasted image 20251108150627.png]]

노션에 정리한 글들..
![[Pasted image 20251108150805.png]]

# 코틀린 테스트 코드
# 코틀린 try-catch
[공식문서](https://kotlinlang.org/docs/exceptions.html)
[코틀린에서 예외처리하기(티스토리)](https://hongku.tistory.com/358)

## 전제 조건 함수 (precondition functions)

| 함수명                                                                         | 사용 목적                                    | 예외 타입                                                                                                          |
| --------------------------------------------------------------------------- | ---------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| [`require()`](https://kotlinlang.org/docs/exceptions.html#require-function) | Checks user input validity               | [`IllegalArgumentException`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-argument-exception/) |
| [`check()`](https://kotlinlang.org/docs/exceptions.html#check-function)     | Checks object or variable state validity | [`IllegalStateException`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-state-exception/)       |
| [`error()`](https://kotlinlang.org/docs/exceptions.html#error-function)     | Indicates an illegal state or condition  | [`IllegalStateException`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-illegal-state-exception/)       |

```kotlin
fun validateTokens(tokens: List<String>?) {  
    if (tokens == null)  
        throw IllegalArgumentException()  
  
    if (tokens.isEmpty())  
        throw IllegalArgumentException()  
  
    for (token in tokens) {  
        if (token.isEmpty())  
            throw IllegalArgumentException()  
    }  
}
```
이와 같이 같은 코드를

```kotlin
fun validateTokens(tokens: List<String>?) {  
    requireNotNull(tokens)  
    require(tokens.isNotEmpty())  
  
    for (token in tokens) {  
        require(token.isNotEmpty())  
    }  
}  

```
이와 같이 **코틀린스럽게** 축약 가능

```kotlin
fun getIndices(count: Int): List<Int> {
    require(count >= 0) { "Count must be non-negative. You set count to $count." }
    return List(count) { it + 1 }
}
```
에러 메세지 또한 지정 가능

## Exeception.class
자바에서 사용했던 테스트 코드를 작성하다보니 이와 같은 문제 발생
```kotlin
@ParameterizedTest  
@DisplayName("다음과 같은 조건에서는 레이싱 경기를 치룰 수 없음")  
@MethodSource("generateRacing")  
fun aaa(cars: List<Car>, totalTurn: Int) {  
    assertThatThrownBy { Racing.carsTotalTurnOf(cars, totalTurn) }  
        .isInstanceOf(IllegalArgumentException.class) // 에러 발생
}  
  
fun generateRacing(): Stream<Arguments> {  
    return Stream.of(  
        Arguments.of(listOf(Car("유어진")),0)  
    )  
}
```

![[Pasted image 20251108152128.png]]

```kotlin
assertThatThrownBy { Racing.carsTotalTurnOf(cars, totalTurn) }  
    .isInstanceOf(IllegalArgumentException::class.java)  
    .hasMessage(expectedMessage)
```
애초에 코틀린에서는 지원하는 문법이 아니기에 위와 같이 작성

## MethodSource 사용
```kotlin
@ParameterizedTest
@MethodSource("stringIntAndListProvider")
fun `MethodSource 파라미터 여러개 전달 Test`(str: String, num: Int, list: List<String>) {
    assertThat(str.length).isEqualTo(5)
    assertThat(num).isGreaterThanOrEqualTo(1).isLessThanOrEqualTo(2)
    assertThat(list).size().isEqualTo(2)
}

companion object {
    @JvmStatic
    fun stringIntAndListProvider(): Stream<Arguments> {
        return Stream.of(
            Arguments.arguments("apple", 1, listOf("a", "b", "c")),
            Arguments.arguments("lemon", 2, listOf("x", "y"))
        )
    }
}
```
**@MethodSource**
- 테스트 클래스 또는 외부 클래스의 하나 이상의 팩토리 메서드를 참조할 수 있다.
    - 명시적으로 팩토리 메서드를 지정하지 않은 경우 관례에 따라 현재 @ParameterziedMethod와 동일한 이름의 팩토리 메서드를 찾게 된다.
- 팩토리 메서드는 반드시 static 이어야 한다.
    - 예외적으로 @TestInstance(Lifecycle.PER_CLASS) 를 사용할 경우 테스트 클래스에 위치한 팩토리 메서드는 static이 아닐 수 있다.
- 팩토리 메서드는 반드시 인자를 받지 않아야 한다.

[출처](https://charliezip.tistory.com/37)

# 코틀린 반복문
https://sfida.tistory.com/45
## 횟수만큼 함수를 실행하고 return 값을 List로 관리하기
```kotlin
fun getRandomNumber(): Int = (1..100).random()

fun main() {
    val results = List(5) { getRandomNumber() }  // getRandomNumber()를 5번 실행
    println(results)
}
```

# 코틀린 문자열
## joinToString() : 리스트 -> 문자열
[Kotlin joinToString - List 문자열 변환 List to String](https://notepad96.tistory.com/90)
```kotlin
racingSnapShots.joinToString("") { racingSnapShot ->
	printRacingSnapShot(racingSnapShot)
}
```
`joinToString`을 통해 리스트를 하나의 문자열로 만들 수 있고 합치기 전 `{}`를 통해 함수를 먼저 실행
## repeat() : 문자열 반복
[[Kotlin-문법] 문자열 반복 repeat()](https://axce.tistory.com/133)
```kotlin
fun main() {
	println("*".repeat(5))
}
// 출력값 : *****
```

# 코틀린 collection
## maxOf...
[출처](https://velog.io/@murjune/Kotlin-Collections-max-maxOf-maxBy-maxWith-maxOfWith)
우승자를 뽑는 로직
```kotlin
fun pickWinners(racing: Racing): List<String> {  
    val cars = racing.getCars()  
    val winnableDistance = cars.maxOfOrNull { it.distance }  
    return cars.filter { car -> car.distance == winnableDistance } .map { car -> car.name }  
}
```
car 프로퍼티의 distance 최댓값을 구함
최댓값으로 필터링하여 우승자를 뽑음

# 코틀린 Data Class
자바의 record처럼 쓰임, 자바의 record와는 조금 다르긴함
[[Kotlin] kotlin data class 이해하기(Medium)](https://medium.com/kenneth-android/kotlin-kotlin-data-class-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-7d7f51885075)
```kotlin
data class RacingResponse(  
    val racingSnapShots: List<RacingSnapShot>,  
    val winners: List<String>  
)
```
## 데이터 클래스(Data class)의 특징
- 상속 받을 수 없습니다.
- val 또는 var으로 선언해야 합니다
- abstract, open, sealed, inner를 붙일 수 없습니다
- 1개 이상의 프로퍼티를 가지고 있어야 합니다
- equals(), toString(), hashCode()에 Override 구현 시 구현 함수를 사용합니다.
### copy()
객체를 쉽게 복사할 수 있다, 심지어 특정 프로퍼티를 수정하여 복사 또한 가능
```kotlin
fun UserProcess() {
    val user1 = User("Kenneth", "https://store.image/profile_1", 30)
    val user2 = user1.copy(name = "scarlet")
    // D/user1: User(name=Kenneth, profileImg=https://store.image/profile_1, age=30)
    // D/user2: User(name=scarlet, profileImg=https://store.image/profile_1, age=30)
}
```

