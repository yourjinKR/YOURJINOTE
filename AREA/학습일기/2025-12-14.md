


---

# 인프런 향로님 모각코



---


자바의 객체 구조는 object header, Instance Data, Padding으로 구분된다.

- object header
	- Mark Word : 객체의 메타 데이터
		- hash code
		- object age
		- lock flag : 멀티 스레드 환경에서 동시성 문제를 해결하기 위한 공유 변수
	- Klass Word : 클래스의 메타 데이터
	- Length : 해당 객체가 배열일때 있음, 즉 배열인가 아닌가로 크기가 다름
- Instance Data : 객체가 실제로 담고 있는 멤버 변수를 저장함. 크기가 큰 데이터부터 정렬.
- Padding : 메모리 접근 최적화를 위한 8배수 패딩



# DTO-Entity 매핑 과정에 대한 고민

복잡한 연관관계를 가진 DTO와 엔티티를 매핑할때 결국 repository에서 해당 엔티티를 조회해야 되는데 이 과정을 어떻게 하는게 효율적일지 의문이었다..

```java
public Routine toEntity(
	RoutineRequest request, 
	List<Exercise> exercises, 
	User writer, 
	User owner) {  
  
    return Routine.builder()  
            .name(request.name())  
            .writer(writer)
            // 생략  
            .build();  
  
}
```

기존 방식은 이러한데, 이렇게 된다면 연관된 엔티티가 많을 수록 매개변수가 많아질 것.
이거는 복잡하지 않는가?
