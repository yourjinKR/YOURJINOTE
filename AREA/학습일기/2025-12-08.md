
# 기초 학습
[Java Ordinary Object Pointer & Java Object Layout](https://github.com/yourjinKR/YOURJINOTE/blob/f52512a088c6c91b4f465c485bc01fe6a20b27bd/RESOURCE/JAVA/Java-Object.md)

# 문제 풀이
[백준 단계별 풀이 - 심화 8, 2차원 배열](https://github.com/yourjinKR/javaBasic/commit/f8962488ecb2ee603b28048e47cf0011c3d5eac7)

# 개인 프로젝트
[refactor: Validation 적용](https://github.com/yourjinKR/fitsync2-backend/pull/14)
[feat: 운동 기록 작성시 측정 데이터의 유형 구분](https://github.com/yourjinKR/fitsync2-backend/pull/15)

---
# Java Object Layout

## Object Header
- Mark Word
- Klass Word : 클래스 메타 데이터
- length
## Instance Data

## Padding



# 값 타입 컬렉션
값 타입 컬렉션은 더티 체킹이 되지 않음을 확인했다. 즉, 수정시 삽입과 추가를 반복함.
그러나 운동 데이터는 수정할 일이 적기도 하고 그 데이터의 양이 미미하다고 판단하여 계속 진행했다.
![Pasted image 20251208163604](GALLERY/Pasted%20image%2020251208163604.png)

```
[Hibernate] 
    delete 
    from
        exercise_effects 
    where
        exercise_id=?
[Hibernate] 
    delete 
    from
        exercise_metrics 
    where
        exercise_id=?
[Hibernate] 
    insert 
    into
        exercise_effects
        (exercise_id, effect_type) 
    values
        (?, ?)
[Hibernate] 
    insert 
    into
        exercise_effects
        (exercise_id, effect_type) 
    values
        (?, ?)
[Hibernate] 
    insert 
    into
        exercise_metrics
        (exercise_id, metric_type) 
    values
        (?, ?)
```


```sql
CREATE TABLE body_parts (
  id bigint NOT NULL AUTO_INCREMENT COMMENT '신체 부위 대분류 ID',
  name varchar(255) NOT NULL COMMENT '대분류 명칭 (예: 상체, 하체)',
  PRIMARY KEY (id)
) COMMENT='신체 부위 대분류 정보';

CREATE TABLE body_detail_parts (
  id bigint NOT NULL AUTO_INCREMENT COMMENT '신체 부위 소분류 ID',
  body_part_id bigint NOT NULL COMMENT '소속 대분류 ID (FK)',
  name varchar(255) NOT NULL COMMENT '소분류 명칭 (예: 벤치프레스, 스쿼트)',
  PRIMARY KEY (id),
  CONSTRAINT fk_body_detail_parent FOREIGN KEY (body_part_id) REFERENCES body_parts (id)
) COMMENT='신체 부위 상세 분류 정보';

CREATE TABLE exercises (
  id bigint NOT NULL AUTO_INCREMENT COMMENT '운동 ID',
  name varchar(255) NOT NULL COMMENT '운동 명칭 (예: 벤치프레스)',
  category varchar(255) NOT NULL COMMENT '운동 카테고리 (FITNESS, CROSSFIT 등)',
  description text NULL COMMENT '운동 상세 설명',
  details json NULL COMMENT '기타 메타데이터 (JSON)',
  hidden tinyint(1) DEFAULT 0 COMMENT '노출 여부 (0: 보임, 1: 숨김)',
  created_at datetime(6) NULL COMMENT '생성 일시',
  updated_at datetime(6) NULL COMMENT '수정 일시',
  PRIMARY KEY (id)
) COMMENT='운동 메인 정보 엔티티';

CREATE TABLE exercise_targets (
  id bigint NOT NULL AUTO_INCREMENT COMMENT '타겟 매핑 ID',
  exercise_id bigint NOT NULL COMMENT '운동 ID (FK)',
  body_detail_part_id bigint NOT NULL COMMENT '타겟 신체 부위 ID (FK)',
  target_role varchar(255) NOT NULL COMMENT '타겟 역할 (MAIN: 주동근, SUB: 부동근 등)',
  PRIMARY KEY (id),
  CONSTRAINT fk_targets_exercise FOREIGN KEY (exercise_id) REFERENCES exercises (id) ON DELETE CASCADE,
  CONSTRAINT fk_targets_body_part FOREIGN KEY (body_detail_part_id) REFERENCES body_detail_parts (id)
) COMMENT='운동별 타겟 신체 부위 매핑';

CREATE TABLE exercise_effects (
  exercise_id bigint NOT NULL COMMENT '운동 ID (FK)',
  effect_type varchar(255) NOT NULL COMMENT '효과 타입 (HYPERTROPHY, STRENGTH 등)',
  CONSTRAINT fk_effects_exercise FOREIGN KEY (exercise_id) REFERENCES exercises (id) ON DELETE CASCADE
) COMMENT='운동별 기대 효과 태그';

CREATE TABLE exercise_metrics (
  exercise_id bigint NOT NULL COMMENT '운동 ID (FK)',
  metric_type varchar(50) NOT NULL COMMENT '기록 속성 (WEIGHT, REPS, DISTANCE, TIME, SPEED, RPE, REST_TIME)',
  PRIMARY KEY (exercise_id, metric_type),
  CONSTRAINT fk_metrics_exercise FOREIGN KEY (exercise_id) REFERENCES exercises (id) ON DELETE CASCADE
) COMMENT='운동별 기록 측정 속성 정의 (어떤 UI를 보여줄지 결정)';
```




[Java Object Layout](#Java%20Object%20Layout)
